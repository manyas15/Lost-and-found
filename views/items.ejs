<% const content = `
<section class="container">
  <h1>All Items</h1>

  <form class="search" method="get" action="/items">
    <input type="text" name="q" id="q" placeholder="Search by name, location, category..." value="${q || ''}"/>
    <button class="btn primary" type="submit">Search</button>
  </form>

  <div id="clientFilter" class="muted" style="margin-bottom: 2rem;">ðŸ’¡ Tip: You can also filter live on this pageâ€”just start typing above.</div>

  <div class="grid" id="itemsGrid">
    ${items.map(i => `
      <a class="card filterable" href="/items/${i.id}" data-text="${[
        i.itemName, i.location, i.category, i.status, i.description
      ].filter(Boolean).join(' ').toLowerCase()}" style="display: flex; flex-direction: column; overflow: hidden;">
        <div style="flex: 1; display: flex; flex-direction: column;">
          <img src="${i.imageUrl}" alt="${i.itemName}" style="width: 100%; height: 250px; object-fit: cover; border-radius: 0.5rem 0.5rem 0 0;"/>
          <div class="card-body" style="flex: 1; display: flex; flex-direction: column;">
            <div style="margin-bottom: 0.75rem;">
              <span class="badge ${i.status}">${i.status.toUpperCase()}</span>
            </div>
            <h3 style="margin-bottom: 0.5rem;">${i.itemName}</h3>
            ${i.description ? `
              <p style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.5; margin-bottom: 0.75rem; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                ${i.description}
              </p>
            ` : ''}
            <div style="margin-top: auto; padding-top: 0.75rem; border-top: 1px solid var(--border-light);">
              <p class="muted" style="margin: 0.25rem 0; font-size: 0.875rem;">${i.category || 'other'} â€¢ ${i.location}</p>
              <p class="muted" style="margin: 0.25rem 0; font-size: 0.875rem;">Date: ${i.date}</p>
              <p class="muted" style="margin: 0.5rem 0 0 0; font-size: 0.875rem;">
                ðŸ“§ ${i.contactEmail}
              </p>
            </div>
          </div>
        </div>
      </a>
    `).join('')}
  </div>

  ${items.length === 0 ? `
    <div class="text-center" style="padding: 3rem; color: var(--text-muted);">
      <div style="font-size: 3rem; margin-bottom: 1rem;">ðŸ“­</div>
      <h3>No items found</h3>
      <p>Be the first to report a lost or found item!</p>
      <div style="margin-top: 2rem;">
        <a href="/report" class="btn primary">Report Lost Item</a>
        <a href="/found" class="btn secondary">Report Found Item</a>
      </div>
    </div>
  ` : ``}
</section>
` %>
<%- include('partials/layout', { title, content }) %>
